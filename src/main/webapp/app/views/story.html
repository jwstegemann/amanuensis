<!--                              -->
<!-- # The inSlots  and -Stories  --> 
<!-- #                            -->

<div id="left-container" class="container left-container" ng-class="{'show-slots': inSlots, 'show-stories': inStories}">
	<!-- inbound Story-List	-->
  <div id="stories-left" class="container stories stories-left shadow-right" ng-controller="SlotCtrl" scrollbar refresh-on-change="stories">
		<div class="story-list-title"><i class="fa fa-bars fa-lg on-slot"></i>{{slotName}}</div>
		<ul class="story-list" ng-switch on="storyListViewMode">
      <div ng-switch-when="few">
        <li class="story-info" ng-repeat="storyInfo in stories" 
          ng-click="openStory(storyInfo.id)">
          <i class="fa fa-book on-slot"></i>{{storyInfo.title}}
          <p>{{storyInfo.content}}</p>
          <i class="fa fa-times fa-lg on-button delete-action" ng-click="remove(storyInfo.id,$index,$event)"></i>
        </li>
      </div>
      <div ng-switch-when="single">
        <li class="story-info" ng-repeat="storyInfo in stories" 
          ng-click="openStory(storyInfo.id)">
          <p class="single-story" story-preview markdown-source="storyInfo.content"></p>
          <i class="fa fa-times fa-lg on-button delete-action" ng-click="remove(storyInfo.id,$index,$event)"></i>
        </li>
      </div>
      <div ng-switch-when="all">
        <li class="story-info" ng-repeat="storyInfo in stories" ng-click="openStory(storyInfo.id)">
          <i class="fa fa-book on-slot"></i>{{storyInfo.title}}
          <i class="fa fa-times fa-lg on-button delete-action" ng-click="remove(storyInfo.id,$index,$event)"></i>
        </li>
      </div>
		</ul>  	
  </div>
	<!-- inbound Slot-List	-->
  <div id="slots-left" class="container slots slots-left shadow-right" scrollbar refresh-on-change="context.inSlots">
    <div class="slot-list-title"><i class="fa fa-link fa-lg on-slot"></i>&nbsp;Inbound</div>
    <ul class="slot-list">
      <li class="slot-name" ng-repeat="slot in context.inSlots" ng-click="selectSlot(slot.name, true)">
      	<i class="fa fa-mail-reply on-slot"></i>{{slot.name}}
      </li>
    </ul>  	
  </div>
</div>
     

<!-- #                            -->
<!-- # The Story itself           --> 
<!-- #                            -->

<div id="story-container" class="container story" ng-class="{'shifted-right': inStories, 'shifted-left': outStories}"> 

    <ng-form>
      <div class="inner">
				<div class="story-header">
					<div class="story-icon"><i class="fa fa-bookmark fa-5x"></i></div>
          <input id="story-title-input" class="story-title" type="text" ng-model="context.story.title" placeholder="A Story..."></input>
				  <h1><span>created on {{context.story.created.substr(0,10)}} by {{context.story.createdBy}}</span></h1>
				</div>
				<div id="story-content" class="content" scrollbar>
				  <textarea ng-show="editMode" id="story-content-editor" class="story-content" ng-model="context.story.content" 
            placeholder="... that still has to be written." 
            uploadable>
          </textarea>
          <div ng-hide="editMode" ng-dblclick="showContentEditor()" class="story-view" markdown>
          </div>
				</div>       
      </div>
    </ng-form>
</div>


<!-- #                            -->
<!-- # The outSlots  and -Stories --> 
<!-- #                            -->

<div id="right-container" class="container right-container" ng-class="{'show-slots': outSlots, 'show-stories': outStories}">
	<!-- outbound Story-List	-->
  <div id="stories-right" class="container stories stories-right shadow-left" ng-controller="SlotCtrl" scrollbar refresh-on-change="stories">
		<div class="story-list-title"><i class="fa fa-bars fa-lg on-slot"></i>{{slotName}}</div>
		<ul class="story-list" ng-switch on="storyListViewMode">
      <div ng-switch-when="few">
        <li class="story-info" ng-repeat="storyInfo in stories" 
          ng-click="openStory(storyInfo.id)">
          <i class="fa fa-book on-slot"></i>{{storyInfo.title}}
          <p>{{storyInfo.content}}</p>
          <i class="fa fa-times fa-lg on-button delete-action" ng-click="remove(storyInfo.id,$index,$event)"></i>
        </li>
      </div>
      <div ng-switch-when="single">
        <li class="story-info" ng-repeat="storyInfo in stories" 
          ng-click="openStory(storyInfo.id)">
          <p class="single-story" story-preview markdown-source="storyInfo.content"></p>
          <i class="fa fa-times fa-lg on-button delete-action" ng-click="remove(storyInfo.id,$index,$event)"></i>
        </li>
      </div>
      <div ng-switch-when="all">
        <li class="story-info" ng-repeat="storyInfo in stories" ng-click="openStory(storyInfo.id)">
          <i class="fa fa-book on-slot"></i>{{storyInfo.title}}
          <i class="fa fa-times fa-lg on-button delete-action" ng-click="remove(storyInfo.id,$index,$event)"></i>
        </li>
      </div>


<!--
      <li class="story-info"><i class="fa fa-book on-slot"></i>TestStory</li>
      <li class="story-info"><i class="fa fa-book on-slot"></i>TestStory</li>
      <li class="story-info"><i class="fa fa-book on-slot"></i>TestStory</li>
      <li class="story-info"><i class="fa fa-book on-slot"></i>TestStory</li>
      <li class="story-info"><i class="fa fa-book on-slot"></i>TestStory</li>
      <li class="story-info"><i class="fa fa-book on-slot"></i>TestStory</li>
      <li class="story-info"><i class="fa fa-book on-slot"></i>TestStory</li>
      <li class="story-info"><i class="fa fa-book on-slot"></i>TestStory</li>
      <li class="story-info"><i class="fa fa-book on-slot"></i>TestStory</li>
      <li class="story-info"><i class="fa fa-book on-slot"></i>TestStory</li>
      <li class="story-info"><i class="fa fa-book on-slot"></i>TestStory</li>
      <li class="story-info"><i class="fa fa-book on-slot"></i>TestStory</li>
      <li class="story-info"><i class="fa fa-book on-slot"></i>TestStory</li>
      <li class="story-info"><i class="fa fa-book on-slot"></i>TestStory</li>
      <li class="story-info"><i class="fa fa-book on-slot"></i>TestStory</li>
      <li class="story-info"><i class="fa fa-book on-slot"></i>TestStory</li>
      <li class="story-info"><i class="fa fa-book on-slot"></i>TestStory</li>
      <li class="story-info"><i class="fa fa-book on-slot"></i>TestStory</li>
      <li class="story-info"><i class="fa fa-book on-slot"></i>TestStory</li>
      <li class="story-info"><i class="fa fa-book on-slot"></i>TestStory</li>
      <li class="story-info"><i class="fa fa-book on-slot"></i>TestStory</li>
-->

		</ul>  	
  </div>
	<!-- outbound Slot-List	-->
  <div id="slots-right" class="container slots slots-right shadow-left" scrollbar refresh-on-change="context.outSlots">
    <div class="slot-list-title"><i class="fa fa-link fa-lg on-slot"></i>&nbsp;Outbound</div>
    <ul class="slot-list">
      <li class="slot-name" ng-repeat="slot in context.outSlots" ng-click="selectSlot(slot.name, false)">
      	<i class="fa fa-mail-reply on-slot"></i>{{slot.name}}
      </li>
    </ul> 
  </div>
</div>


<!-- #                         -->
<!-- # Modals                  --> 
<!-- #                         -->

<div class="md-modal md-effect-3" id="slot-name-modal" ng-controller="SlotNameModalCtrl">
  <div class="md-content">
    <h3>{{title}}&nbsp;<i style="float: right" class="fa fa-times action" ng-click="cancel()"></i>
    </h3>
    <div>
    	<input class="start-focus" type="text" ng-model="newSlotName" on-enter="done()" on-escape="cancel()" placeholder="name of new slot"></input>
      <i class="fa fa-check fa-2x on-button action opacity-hover" ng-click="done()"></i>
    </div>
  </div>
</div>

