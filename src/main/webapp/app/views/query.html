<div id="query-sidebar" class="query-sidebar container shadow-right" scrollbar>
    <h3 ng-show="result"class="filterHeader"><i class="fa fa-filter fa-lg on-slot"></i>&nbsp;Filter Tags:</h3>
    <ul ng-show="result" class="tag-list">
      <li ng-repeat="term in result.facets.tags.terms" ng-click="searchWithFilter(term.term)" on-finish-render="#graph-query-results">
        <a><i class="fa fa-tag"></i>{{term.term}} ({{term.count}})</a>
      </li>
    </ul>
    <h3 ng-show="result"class="filterHeader"><i class="fa fa-filter fa-lg on-slot"></i>&nbsp;Filter Dates:</h3>
    <ul ng-show="result" class="tag-list">
      <li ng-click="searchWithDate(result.facets.dates.ranges[0].from_str)">
        <a><i class="fa fa-calendar"></i>today ({{result.facets.dates.ranges[0].count}})</a>
      </li>
      <li ng-click="searchWithDate(result.facets.dates.ranges[1].from_str)">
        <a><i class="fa fa-calendar"></i>yesterday ({{result.facets.dates.ranges[1].count}})</a>
      </li>
      <li ng-click="searchWithDate(result.facets.dates.ranges[2].from_str)">
        <a><i class="fa fa-calendar"></i>last week ({{result.facets.dates.ranges[2].count}})</a>
      </li>
      <li ng-click="searchWithDate(result.facets.dates.ranges[3].from_str)">
        <a><i class="fa fa-calendar"></i>two weeks ago ({{result.facets.dates.ranges[3].count}})</a>
      </li>
      <li ng-click="searchWithDate(result.facets.dates.ranges[4].from_str)">
        <a><i class="fa fa-calendar"></i>last month({{result.facets.dates.ranges[4].count}})</a>
      </li>
      <li ng-click="searchWithDate(result.facets.dates.ranges[5].from_str)">
        <a><i class="fa fa-calendar"></i>last year ({{result.facets.dates.ranges[5].count}})</a>
      </li>
    </ul>    
</div>

<div id="query-results" class="query-results container" scrollbar>
  <h2 ng-show="result" class="resultHeader">
    <i class="fa fa-bars fa-lg on-slot"></i>&nbsp;Results for "{{queryString}}"
    <span ng-show="terms"> with Tag <span ng-repeat="term in terms"><i class="fa fa-tag"></i>{{term}}</span></span>
    <span ng-show="lastQuery.fromDate"> since {{lastQuery.fromDate.substr(0,10)}}</span></span>
  </h2>

  <p ng-show="result" class="stats">found {{result.hits.total}} stories in {{result.took}} ms.</p>

    <ul ng-show="result" class="resultList">

      <li class="resultListItem" ng-repeat="storyResult in result.hits.hits" on-finish-render="#query-results">
        <a href="#/story/{{storyResult._source.id}}"><i class="fa fa-bookmark"></i>&nbsp;&nbsp;{{storyResult._source.title}}</a>
        <p class="origin">created by {{storyResult._source.createdBy}} on {{storyResult._source.created.substr(0,10)}}</p>
        <p class="content">{{storyResult._source.content}}...</p>
      </li>
    </ul>

  <p class="pagination" ng-show="result && pages > 1">
    <span class="pagination-nav" ng-show="page > 0" ng-click="previousPage()">
      <i class="fa fa-angle-double-left"></i>&nbsp;previous
    </span>&nbsp;&nbsp;
    <span>page&nbsp;{{page+1}}&nbsp;of&nbsp;{{pages}}</span>&nbsp;&nbsp;
    <span class="pagination-nav" ng-hide="(page+1) === pages" ng-click="nextPage()">next&nbsp;<i class="fa fa-angle-double-right"></i></span>
  </p>  

</div>
